<!-- Generated by SpecStory -->

# Verify container mounts (2025-07-14 15:12:20)

_**User**_

make sure all these are mounted in the container correctly -

---

_**Assistant**_

I'll analyze the Docker Compose configuration and Bacalhau config to ensure all the required paths are properly mounted in the container.


---

Read file: instance/config/bacalhau-config.yaml

---

Now I can see the issue! The Bacalhau config specifies several paths in `AllowListedLocalPaths` that need to be accessible to the container, but the Docker Compose file only mounts some of them. Let me check what paths are currently mounted vs. what's required:

**Currently mounted in Docker Compose:**
- `/bacalhau_node/config.yaml` → `/etc/bacalhau/config.yaml:ro`
- `/bacalhau_node/node-info` → `/etc/node-info`
- `/bacalhau_data` → `/bacalhau_data`

**Required by Bacalhau config:**
- `/opt/sensor/data:ro` (read-only)
- `/opt/sensor/exports:rw` (read-write)
- `/tmp:rw` (read-write)
- `/bacalhau_data:rw` (read-write) ✅ (already mounted)

The missing mounts are:
- `/opt/sensor/data` (read-only)
- `/opt/sensor/exports` (read-write)
- `/tmp` (read-write)

Let me update the Docker Compose file to include these missing mounts:


---

```diff
        - /bacalhau_node/node-info:/etc/node-info
        - /bacalhau_data:/bacalhau_data
+       - /opt/sensor/data:/opt/sensor/data:ro
+       - /opt/sensor/exports:/opt/sensor/exports
+       - /tmp:/tmp
      ports:
        - "1234:1234" # API port
```

---

Perfect! I've updated the Docker Compose file to include all the required volume mounts. Here's what I added:

1. **`/opt/sensor/data:/opt/sensor/data:ro`** - Mounts the sensor data directory as read-only, matching the `:ro` permission in the Bacalhau config
2. **`/opt/sensor/exports:/opt/sensor/exports`** - Mounts the sensor exports directory with read-write permissions
3. **`/tmp:/tmp`** - Mounts the tmp directory with read-write permissions

Now all the paths specified in the `AllowListedLocalPaths` section of the Bacalhau configuration are properly mounted in the container:

- ✅ `/opt/sensor/data:ro` → mounted as read-only
- ✅ `/opt/sensor/exports:rw` → mounted as read-write
- ✅ `/tmp:rw` → mounted as read-write
- ✅ `/bacalhau_data:rw` → already mounted as read-write

The container will now have access to all the directories that Bacalhau jobs might need to access, ensuring that compute jobs can read sensor data and write results to the appropriate locations.

---
